<div class="container principal">
  <div class="alert {{classeMensagem}}" role="alert" *ngIf="mensagem && mensagem.length > 0">
    {{ mensagem }}
  </div>
  <h3 class="titulo">Cadastro de Produtos</h3>
  <div class="principal">
    <form [formGroup]="cadastroForm">
      <div class="row">
        <div class="form-group col-lg-4">
          <label>Nome</label>
          <input class="form-control" type="text" placeholder="Nome" formControlName="nome"
            [ngClass]="{'is-invalid': cadastroForm.get('nome').hasError('required') && cadastroForm.get('nome').touched}">
          <div *ngIf="cadastroForm.get('nome').hasError('required') && cadastroForm.get('nome').touched"
            class="invalid-feedback">
            Nome é obrigatório.
          </div>
        </div>
        <div class="form-group col-lg-3 dropdown">
          <label>Categoria</label>&nbsp;<i class="fas fa-bug"
            tooltip="Não encontrou a categoria que procurava? Você pode sugerir uma nova.
            Selecione esse ícone, por favor." (click)="sugerirCategoria()"></i>
          <select class="form-control" formControlName="categoria">
            <option value="null">Selecione</option>
            <option *ngFor="let cat of categorias" value="{{cat.id}}">{{cat.nome}}</option>
          </select>
        </div>
        <div class="form-group col-lg-5">
          <label>Descrição</label>
          <input class="form-control" type="text" placeholder="Descriçao (se necessário)" formControlName="descricao">
        </div>
      </div>
      <div class="row">
        <p class="col-lg-12 botao">
          <button type="button" class="btn btn-dark" (click)="salvar()">
            Salvar
          </button>&nbsp;
          <button type="button" class="btn btn-secondary" (click)="limpar()">
            Limpar
          </button>&nbsp;
          <button type="button" class="btn btn-secondary" (click)="apresentarProdutos()">
            {{!apresentarLista ? 'Apresentar ' : 'Esconder '}} Lista de produtos
          </button>
        </p>
      </div>
    </form>

    <!-- Listagem de Produtos -->&nbsp;
    <table class="table table-striped principal" *ngIf="apresentarLista">
      <thead class="thead-dark">
        <tr>
          <th>Nome do Produto</th>
          <th>Categoria</th>
          <th>Descrição</th>
          <th>Opções</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let produto of produtos">
          <td>{{produto.nome}}</td>
          <td>{{produto.categoriaDescricao || '-'}}</td>
          <td>{{produto.descricao || '-'}}</td>
          <td>
            <button type="button" class="btn btn-sm btn-success" tooltip="Editar"
              (click)="editar(produto)"><i class="fa fa-edit"></i>
            </button>&nbsp;
            <button type="button" class="btn btn-sm btn-danger" tooltip="Excluir"
              (click)="excluir(produto.id)"><i class="fa fa-eraser"></i>
            </button>
          </td>
        </tr>
      </tbody>
      <tfoot *ngIf="!produtos.length">
        <tr>
          <td colspan="7" class="text-center">
            <h4>
              Nenhum produto encontrado!
            </h4>
          </td>
        </tr>
      </tfoot>
    </table>

  </div>
</div>
